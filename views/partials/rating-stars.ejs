<%
// expects: avg (0..5), count (int)
// usage: <%- include('partials/rating-stars', { avg: product.avgRating, count: product.ratingsCount }) %>
const rounded = Number(avg || 0).toFixed(1);
const full = Math.floor(avg || 0);
const half = (avg - full) >= 0.5;
const empty = 5 - full - (half ? 1 : 0);
%>
<div class="rating-compact" aria-label="Average rating <%= rounded %> out of 5">
  <% for (let i = 0; i < full; i++) { %>★<% } %>
  <% if (half) { %>☆<% } %>
  <% for (let i = 0; i < empty; i++) { %>✩<% } %>
  <span class="rating-text"><%= rounded %> (<%= count || 0 %>)</span>
</div>

<style>
.rating-compact { display:inline-flex; gap:.4rem; align-items:center; font-size:1.05rem; }
.rating-compact .rating-text { font-size:.95rem; opacity:.8; }
</style>
