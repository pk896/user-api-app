<section class="auth-page">
  <h1 class="page-title">üîê Forgot Password</h1>

  <% (success || []).forEach(msg => { %>
  <div class="flash flash-success">‚úÖ <%= msg %></div>
<% }) %>

<% (error || []).forEach(msg => { %>
  <div class="flash flash-error">‚ùå <%= msg %></div>
<% }) %>

  <form action="/users/password/forgot" method="POST" class="form">
    <div class="form-group">
      <label for="email">Email address</label>
      <input id="email" name="email" type="email" required placeholder="you@example.com" class="input">
    </div>

    <button type="submit" class="btn xs primary wfull">Send reset link</button>
  </form>

  <p class="muted"><a href="/users/login">Back to sign in</a></p>
</section>

<style>
.auth-page{max-width:420px;margin:24px auto;padding:16px}
.page-title{font-size:1.4rem;margin-bottom:12px}
.form-group{margin:12px 0}
.input{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px}
.btn{border:0;padding:10px 14px;border-radius:10px}
.btn.primary{background:#2563eb;color:#fff}
.btn.wfull{width:100%}
.flash{margin:10px 0;padding:10px;border-radius:8px}
.flash-success{background:#ecfdf5;border:1px solid #10b981}
.flash-error{background:#fef2f2;border:1px solid #ef4444}
.muted{color:#555;margin-top:8px}
</style>

<script nonce="<%= nonce %>">
document.addEventListener("DOMContentLoaded", () => {
  const form = document.querySelector('form[action="/users/password/forgot"]');
  if (!form) return;
  form.addEventListener("submit", () => {
    const btn = form.querySelector('button[type="submit"]');
    if (btn) {
      btn.disabled = true;
      const original = btn.textContent;
      btn.dataset.original = original;
      btn.textContent = "Sending‚Ä¶";
    }
  });
});
</script>

