<section class="auth-page mini">
  <!-- Brand Header -->
  <div class="brand-header">
    <div class="logo-preview">
      <div class="logo-color blue"></div>
      <div class="logo-color purple"></div>
      <div class="logo-color green"></div>
      <div class="logo-color black"></div>
    </div>
    <h1 class="page-title">ðŸ“¬ Check Your Email</h1>
    <p class="page-subtitle">We've sent you a secure password reset link</p>
  </div>

  <!-- Confirmation Card -->
  <div class="confirmation-card card">
    <!-- Status Indicator -->
    <div class="status-indicator">
      <div class="status-step completed">
        <div class="step-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <div class="step-content">
          <span class="step-title">Request Submitted</span>
          <span class="step-subtitle">Email sent successfully</span>
        </div>
      </div>
      
      <div class="status-connector"></div>
      
      <div class="status-step pending">
        <div class="step-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <div class="step-content">
          <span class="step-title">Check Inbox</span>
          <span class="step-subtitle">Open email and click link</span>
        </div>
      </div>
    </div>

    <!-- Email Display -->
    <div class="email-display">
      <div class="email-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
      </div>
      <div class="email-content">
        <p class="email-label">Password reset link sent to:</p>
        <p class="email-address">
          <span class="email-text"><%= maskedEmail || 'your email' %></span>
        </p>
        <p class="email-note">(if this email exists in our system)</p>
      </div>
    </div>

    <!-- Timer & Expiry -->
    <div class="expiry-notice">
      <div class="expiry-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
      </div>
      <div class="expiry-content">
        <h4>Link expires in 1 hour</h4>
        <p>For security reasons, the reset link will expire in <strong>60 minutes</strong></p>
      </div>
    </div>

    <!-- Tips & Guidelines -->
    <div class="guidelines">
      <h3 class="guidelines-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        Important Information
      </h3>
      
      <div class="guidelines-grid">
        <div class="guideline-item">
          <div class="guideline-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </div>
          <div class="guideline-content">
            <h4>Delivery Time</h4>
            <p>It can take 1-5 minutes for the email to arrive in your inbox</p>
          </div>
        </div>
        
        <div class="guideline-item">
          <div class="guideline-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
          </div>
          <div class="guideline-content">
            <h4>Check Spam</h4>
            <p>Look in spam or junk folders if you don't see it</p>
          </div>
        </div>
        
        <div class="guideline-item">
          <div class="guideline-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
          </div>
          <div class="guideline-content">
            <h4>Security First</h4>
            <p>Only click the link from our official email address</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Email Client Quick Links -->
    <div class="email-clients">
      <h4 class="clients-title">Quick Access to Email Clients</h4>
      <div class="clients-grid">
        <a href="https://mail.google.com" target="_blank" class="client-link gmail" rel="noopener">
          <svg class="client-icon" width="24" height="24" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          <span class="client-name">Gmail</span>
        </a>
        
        <a href="https://outlook.live.com" target="_blank" class="client-link outlook" rel="noopener">
          <svg class="client-icon" width="24" height="24" viewBox="0 0 24 24">
            <path fill="#0072C6" d="M12 2L2 7v10l10 5 10-5V7L12 2z"/>
            <path fill="#FFF" d="M12 12l8-4.5V17l-8 4.5-8-4.5V7.5L12 12z"/>
            <path fill="#0072C6" d="M12 12l8-4.5v9L12 21l-8-4.5v-9L12 12z"/>
          </svg>
          <span class="client-name">Outlook</span>
        </a>
        
        <a href="https://mail.yahoo.com" target="_blank" class="client-link yahoo" rel="noopener">
          <svg class="client-icon" width="24" height="24" viewBox="0 0 24 24">
            <path fill="#6001D2" d="M18.5 12.5c0 3.59-2.91 6.5-6.5 6.5s-6.5-2.91-6.5-6.5S8.41 6 12 6s6.5 2.91 6.5 6.5z"/>
            <path fill="#FFF" d="M12 7.5c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm2.5 5c0 1.38-1.12 2.5-2.5 2.5S9.5 13.38 9.5 12s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5z"/>
          </svg>
          <span class="client-name">Yahoo</span>
        </a>
        
        <a href="https://icloud.com/mail" target="_blank" class="client-link icloud" rel="noopener">
          <svg class="client-icon" width="24" height="24" viewBox="0 0 24 24">
            <path fill="#0B74DE" d="M18.5 12.5c0 3.59-2.91 6.5-6.5 6.5s-6.5-2.91-6.5-6.5S8.41 6 12 6s6.5 2.91 6.5 6.5z"/>
            <path fill="#FFF" d="M12 7.5c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm2.5 5c0 1.38-1.12 2.5-2.5 2.5S9.5 13.38 9.5 12s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5z"/>
          </svg>
          <span class="client-name">iCloud</span>
        </a>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <div class="primary-actions">
        <a href="/business/login" class="btn primary wfull signin-btn" data-nav="true">
          <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
            <polyline points="10 17 15 12 10 7"></polyline>
            <line x1="15" y1="12" x2="3" y2="12"></line>
          </svg>
          Back to Login
        </a>
      </div>
      
      <div class="secondary-actions">
        <a href="/business/password/forgot" class="btn outline wfull retry-btn" data-nav="true">
          <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 4v6h-6"></path>
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
          </svg>
          Use a Different Email
        </a>
      </div>
    </div>

    <!-- Auto-redirect Timer -->
    <div class="redirect-timer">
      <div class="timer-display">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <span>Redirecting to login page in <span id="countdown">30</span> seconds</span>
      </div>
      <button type="button" class="timer-cancel" id="cancelRedirect">
        Cancel auto-redirect
      </button>
    </div>
  </div>

  <!-- Support Section -->
  <div class="support-section">
    <details class="support-details">
      <summary class="support-summary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        Still having trouble?
      </summary>
      <div class="support-content">
        <p>If you didn't receive the reset link, try these steps:</p>
        <ol class="support-steps">
          <li>Wait a few minutes and check your spam folder</li>
          <li>Make sure you entered the correct email address</li>
          <li>Try using the "Use a Different Email" button above</li>
          <li>Contact our support team for assistance</li>
        </ol>
        <a href="mailto:support@yourcompany.com" class="support-link">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
          Email Support: support@yourcompany.com
        </a>
      </div>
    </details>
  </div>
</section>

<style nonce="<%= typeof nonce !== 'undefined' ? nonce : '' %>">
  /* Brand Color Variables */
  :root {
    --brand-blue: #2563EB;    /* Trust & Reliability */
    --brand-purple: #7C3AED;  /* Innovation & Creativity */
    --brand-green: #22C55E;   /* Growth & Success (Primary) */
    --brand-black: #0F172A;   /* Sophistication & Premium */
    
    --bg-primary: #22C55E;
    --bg-secondary: #f0fdf4;
    --text-primary: #0F172A;
    --text-secondary: #475569;
    --card-bg: #ffffff;
    --card-border: #e2e8f0;
    --input-bg: #f8fafc;
    --success-light: #dcfce7;
    --error-light: #fee2e2;
    --warning-light: #fef3c7;
  }

  .dark-theme {
    --bg-primary: #16a34a;
    --bg-secondary: #052e16;
    --text-primary: #f1f5f9;
    --text-secondary: #cbd5e1;
    --card-bg: #1e293b;
    --card-border: #334155;
    --input-bg: #0f172a;
    --success-light: #064e3b;
    --error-light: #7f1d1d;
    --warning-light: #78350f;
  }

  /* Base Styles */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, #ffffff 100%);
    color: var(--text-primary);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    line-height: 1.5;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }

  .dark-theme body {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, #0f172a 100%);
  }

  /* Main Container */
  .auth-page.mini {
    max-width: 520px;
    width: 100%;
    margin: 0 auto;
  }

  /* Brand Header */
  .brand-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .logo-preview {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 1rem;
  }

  .logo-color {
    width: 16px;
    height: 16px;
    border-radius: 4px;
  }

  .logo-color.blue { background: var(--brand-blue); }
  .logo-color.purple { background: var(--brand-purple); }
  .logo-color.green { background: var(--brand-green); }
  .logo-color.black { background: var(--brand-black); }

  .page-title {
    font-size: 1.75rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--brand-blue), var(--brand-purple));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .page-subtitle {
    color: var(--text-secondary);
    font-size: 0.9375rem;
    line-height: 1.4;
  }

  /* Card */
  .confirmation-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
  }

  .confirmation-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--brand-green), var(--brand-blue));
  }

  .dark-theme .confirmation-card {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }

  /* Status Indicator */
  .status-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .status-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    flex: 1;
  }

  .step-icon {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0.75rem;
    border: 2px solid var(--card-border);
    background: var(--input-bg);
    transition: all 0.3s ease;
  }

  .status-step.completed .step-icon {
    background: var(--brand-green);
    border-color: var(--brand-green);
    color: white;
  }

  .status-step.pending .step-icon {
    background: var(--input-bg);
    border-color: var(--brand-blue);
    color: var(--brand-blue);
  }

  .step-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .step-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
  }

  .step-subtitle {
    font-size: 0.75rem;
    color: var(--text-secondary);
  }

  .status-connector {
    flex: 0 0 40px;
    height: 2px;
    background: var(--card-border);
    position: relative;
    top: -28px;
  }

  /* Email Display */
  .email-display {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(124, 58, 237, 0.05));
    border-radius: 12px;
    margin-bottom: 1.5rem;
    border: 1px solid rgba(124, 58, 237, 0.1);
  }

  .email-icon {
    flex-shrink: 0;
    color: var(--brand-purple);
  }

  .email-content {
    flex: 1;
  }

  .email-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
  }

  .email-address {
    margin-bottom: 0.25rem;
  }

  .email-text {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
  }

  .email-note {
    font-size: 0.75rem;
    color: var(--text-secondary);
    font-style: italic;
  }

  /* Expiry Notice */
  .expiry-notice {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: var(--warning-light);
    border-radius: 12px;
    margin-bottom: 1.5rem;
    border: 1px solid rgba(245, 158, 11, 0.2);
  }

  .expiry-icon {
    flex-shrink: 0;
    color: #f59e0b;
  }

  .expiry-content h4 {
    font-size: 0.9375rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: #92400e;
  }

  .expiry-content p {
    font-size: 0.8125rem;
    color: #92400e;
    line-height: 1.4;
  }

  .dark-theme .expiry-notice {
    background: #78350f;
    border-color: rgba(245, 158, 11, 0.3);
  }

  .dark-theme .expiry-content h4,
  .dark-theme .expiry-content p {
    color: #fbbf24;
  }

  /* Guidelines */
  .guidelines {
    margin-bottom: 2rem;
  }

  .guidelines-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
  }

  .guidelines-title svg {
    color: var(--brand-blue);
  }

  .guidelines-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .guideline-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    background: var(--input-bg);
    border: 1px solid var(--card-border);
    border-radius: 10px;
  }

  .guideline-icon {
    flex-shrink: 0;
    color: var(--brand-purple);
  }

  .guideline-content h4 {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: var(--text-primary);
  }

  .guideline-content p {
    font-size: 0.8125rem;
    color: var(--text-secondary);
    line-height: 1.4;
  }

  /* Email Clients */
  .email-clients {
    margin-bottom: 2rem;
  }

  .clients-title {
    font-size: 0.9375rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
    text-align: center;
  }

  .clients-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .client-link {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--input-bg);
    border: 1px solid var(--card-border);
    border-radius: 10px;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .client-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .client-link.gmail:hover {
    background: #f1f3f4;
    border-color: #4285f4;
  }

  .client-link.outlook:hover {
    background: #e6f2ff;
    border-color: #0072c6;
  }

  .client-link.yahoo:hover {
    background: #f5f0ff;
    border-color: #6001d2;
  }

  .client-link.icloud:hover {
    background: #e6f2ff;
    border-color: #0b74de;
  }

  .client-icon {
    flex-shrink: 0;
  }

  .client-name {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-primary);
  }

  .dark-theme .client-link:hover {
    background: var(--card-bg);
  }

  /* Action Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    font-size: 0.9375rem;
    font-weight: 600;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
  }

  .btn.primary {
    background: linear-gradient(135deg, var(--brand-green), #16a34a);
    color: white;
  }

  .btn.primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(34, 197, 94, 0.3);
  }

  .btn.outline {
    background: transparent;
    color: var(--text-primary);
    border: 2px solid var(--card-border);
  }

  .btn.outline:hover {
    border-color: var(--brand-blue);
    background: rgba(37, 99, 235, 0.05);
  }

  .btn.ghost {
    background: transparent;
    color: var(--text-secondary);
    border: 1px solid transparent;
  }

  .btn.ghost:hover {
    color: var(--text-primary);
    background: rgba(0, 0, 0, 0.05);
  }

  .btn.wfull {
    width: 100%;
  }

  .btn-icon {
    flex-shrink: 0;
  }

  /* Action Buttons */
  .action-buttons {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .primary-actions {
    order: 1;
  }

  .secondary-actions {
    order: 2;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  /* Redirect Timer */
  .redirect-timer {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: var(--input-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    margin-bottom: 1rem;
  }

  .timer-display {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
  }

  .timer-display svg {
    color: var(--brand-purple);
  }

  #countdown {
    font-weight: 700;
    color: var(--text-primary);
    font-family: monospace;
  }

  .timer-cancel {
    background: none;
    border: none;
    color: var(--brand-blue);
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    text-decoration: underline;
    padding: 0.25rem 0.5rem;
  }

  .timer-cancel:hover {
    color: var(--brand-purple);
  }

  /* Support Section */
  .support-section {
    background: var(--input-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    overflow: hidden;
  }

  .support-details {
    border: none;
  }

  .support-summary {
    padding: 1rem;
    list-style: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-primary);
    transition: background-color 0.2s ease;
  }

  .support-summary:hover {
    background: rgba(0, 0, 0, 0.02);
  }

  .support-summary::-webkit-details-marker {
    display: none;
  }

  .support-summary svg {
    color: var(--brand-blue);
  }

  .support-content {
    padding: 1.5rem;
    border-top: 1px solid var(--card-border);
  }

  .support-content p {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
  }

  .support-steps {
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .support-steps li {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    line-height: 1.4;
  }

  .support-steps li:last-child {
    margin-bottom: 0;
  }

  .support-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--brand-blue);
    text-decoration: none;
    font-weight: 500;
  }

  .support-link:hover {
    text-decoration: underline;
  }

  /* Mobile Optimizations for Hisense U50 Lite (360px width) */
  @media (max-width: 360px) {
    body {
      padding: 0.5rem;
      align-items: flex-start;
    }

    .auth-page.mini {
      padding: 0;
    }

    .page-title {
      font-size: 1.5rem;
    }

    .page-subtitle {
      font-size: 0.875rem;
    }

    .confirmation-card {
      padding: 1.5rem 1.25rem;
      border-radius: 16px;
    }

    .status-indicator {
      flex-direction: column;
      gap: 1rem;
    }

    .status-connector {
      display: none;
    }

    .email-display {
      flex-direction: column;
      text-align: center;
      gap: 0.75rem;
      padding: 1rem;
    }

    .guidelines-grid {
      grid-template-columns: 1fr;
    }

    .guideline-item {
      flex-direction: column;
      text-align: center;
      gap: 0.5rem;
    }

    .clients-grid {
      grid-template-columns: 1fr;
    }

    .secondary-actions {
      flex-direction: column;
    }

    .redirect-timer {
      text-align: center;
    }

    .timer-display {
      flex-direction: column;
      gap: 0.25rem;
    }
  }

  /* Tablet */
  @media (min-width: 768px) {
    .guidelines-grid {
      grid-template-columns: repeat(3, 1fr);
    }

    .clients-grid {
      grid-template-columns: repeat(4, 1fr);
    }

    .secondary-actions {
      flex-direction: row;
    }
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Focus styles for keyboard navigation */
  :focus-visible {
    outline: 2px solid var(--brand-green);
    outline-offset: 2px;
  }
</style>

<script nonce="<%= typeof nonce !== 'undefined' ? nonce : '' %>">
  (function () {
    'use strict';

    // Navigation Helper
    const initNavigation = () => {
      document.querySelectorAll('a[data-nav="true"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          window.location.href = link.href;
        });
      });
    };

    // Auto-redirect Timer
    const initRedirectTimer = () => {
      const countdownElement = document.getElementById('countdown');
      const cancelButton = document.getElementById('cancelRedirect');
      const redirectUrl = '/business/login';
      
      if (!countdownElement) return;

      let countdown = 30; // 30 seconds countdown
      let redirectTimer;

      const updateCountdown = () => {
        countdownElement.textContent = countdown;
        countdown--;
        
        if (countdown < 0) {
          clearInterval(redirectTimer);
          window.location.href = redirectUrl;
        }
      };

      // Start countdown
      redirectTimer = setInterval(updateCountdown, 1000);
      updateCountdown(); // Initial update

      // Cancel redirect
      if (cancelButton) {
        cancelButton.addEventListener('click', () => {
          clearInterval(redirectTimer);
          countdownElement.parentElement.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            <span>Auto-redirect cancelled</span>
          `;
          cancelButton.style.display = 'none';
        });
      }
    };

    // Email Client Tracking
    const initEmailClientTracking = () => {
      const clientLinks = document.querySelectorAll('.client-link');
      
      clientLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          const clientName = link.classList.contains('gmail') ? 'Gmail' :
                           link.classList.contains('outlook') ? 'Outlook' :
                           link.classList.contains('yahoo') ? 'Yahoo' :
                           link.classList.contains('icloud') ? 'iCloud' : 'Unknown';
          
          // Track email client click (could send to analytics)
          console.log(`Email client clicked: ${clientName}`);
          
          // Store preference for future use
          try {
            localStorage.setItem('preferredEmailClient', clientName);
          } catch (error) {
            console.error('Failed to store email client preference:', error);
          }
        });
      });
    };

    // Support Details Enhancement
    const initSupportDetails = () => {
      const supportDetails = document.querySelector('.support-details');
      
      if (!supportDetails) return;

      // Auto-open support if user stays on page for 15 seconds
      let supportTimer = setTimeout(() => {
        if (!supportDetails.open) {
          supportDetails.open = true;
        }
      }, 15000);

      // Clear timer if user interacts
      document.addEventListener('click', () => {
        clearTimeout(supportTimer);
      });
    };

    // Page Analytics
    const initPageAnalytics = () => {
      // Track page view
      console.log('Password reset sent page viewed');
      
      // Track time on page
      const startTime = Date.now();
      window.addEventListener('beforeunload', () => {
        const timeSpent = Math.round((Date.now() - startTime) / 1000);
        console.log(`Time spent on page: ${timeSpent} seconds`);
      });
    };

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      initNavigation();
      initRedirectTimer();
      initEmailClientTracking();
      initSupportDetails();
      initPageAnalytics();
      
      // Add entrance animation
      const card = document.querySelector('.confirmation-card');
      if (card) {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
          card.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, 100);
      }
      
      // Add pulse animation to email icon
      const emailIcon = document.querySelector('.email-icon');
      if (emailIcon) {
        emailIcon.style.animation = 'pulse 2s ease-in-out infinite';
      }
    });

  })();
</script>