<!--views/users-forgot-username.ejs-->
<section class="forgot-page">
  <div class="forgot-container">

    <div class="forgot-header">
      <div class="forgot-gradient-circle">
        <svg class="forgot-lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 2a10 10 0 1 0 10 10" />
          <path d="M12 8v4l3 2" />
        </svg>
      </div>
      <h1 class="forgot-main-title">Recover Username</h1>
      <p class="forgot-subtitle">Enter your email and we’ll send your username to your inbox.</p>
    </div>

    <% if (messages && messages.error) { %>
      <div class="forgot-alert forgot-alert-error">
        <div class="forgot-alert-content">
          <strong>Error:</strong> <%= messages.error[0] %>
        </div>
      </div>
    <% } %>

    <% if (messages && messages.success) { %>
      <div class="forgot-alert forgot-alert-success">
        <div class="forgot-alert-content">
          <strong>Success:</strong> <%= messages.success[0] %>
        </div>
      </div>
    <% } %>

    <div class="forgot-card">
      <form action="/users/username/forgot" method="POST" class="forgot-form">
        <div class="forgot-form-group">
          <label for="forgot-email" class="forgot-label">Email Address</label>

          <div class="forgot-input-wrapper">
            <input
              type="email"
              id="forgot-email"
              name="email"
              class="forgot-input"
              placeholder="you@example.com"
              required
              autocomplete="email"
              inputmode="email"
              value="<%= typeof email !== 'undefined' ? email : '' %>"
            />
          </div>

          <p class="forgot-hint">We’ll email your username if the address exists in our system.</p>
        </div>

        <button type="submit" class="forgot-submit-btn">Send Username</button>
      </form>

      <div class="forgot-navigation" style="margin-top:14px">
        <a href="/users/login" class="forgot-nav-link">Back to Sign In</a>
        <span class="forgot-nav-separator">·</span>
        <a href="/users/password/forgot" class="forgot-nav-link">Forgot Password?</a>
      </div>
    </div>

  </div>
</section>

<style nonce="<%= typeof nonce !== 'undefined' ? nonce : '' %>">
  .forgot-page{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem;background:linear-gradient(135deg,#0F172A 0%,#1E293B 100%);}
  .forgot-container{width:100%;max-width:440px;}
  .forgot-header{text-align:center;margin-bottom:1.25rem;}
  .forgot-gradient-circle{width:76px;height:76px;margin:0 auto 1rem;background:linear-gradient(135deg,#2563EB,#7C3AED);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 15px 40px rgba(37,99,235,.3);}
  .forgot-lock-icon{width:34px;height:34px;}
  .forgot-main-title{font-size:1.75rem;font-weight:800;margin-bottom:.35rem;background:linear-gradient(135deg,#2563EB 0%,#7C3AED 50%,#22C55E 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
  .forgot-subtitle{color:#94A3B8;font-size:.95rem;line-height:1.5;margin:0 auto;max-width:320px;}
  .forgot-alert{padding:.875rem 1rem;border-radius:10px;margin-bottom:1rem;font-size:.875rem;line-height:1.5}
  .forgot-alert-error{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);color:#FECACA;}
  .forgot-alert-success{background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.3);color:#BBF7D0;}
  .forgot-card{background:rgba(15,23,42,.9);border:1px solid rgba(37,99,235,.15);border-radius:16px;padding:1.25rem;box-shadow:0 20px 60px rgba(0,0,0,.25);}
  .forgot-label{display:block;font-size:.875rem;font-weight:600;color:#F1F5F9;margin-bottom:.5rem;}
  .forgot-input{width:100%;padding:.875rem 1rem;background:#020617;border:1px solid #1f2937;border-radius:10px;color:#f9fafb;font-size:.95rem}
  .forgot-input:focus{outline:none;border-color:#2563EB;box-shadow:0 0 0 3px rgba(37,99,235,.35);}
  .forgot-hint{font-size:.75rem;color:#94A3B8;margin-top:.4rem;}
  .forgot-submit-btn{width:100%;margin-top:.75rem;padding:.875rem 1rem;background:linear-gradient(135deg,#2563EB,#7C3AED);border:none;border-radius:10px;color:#fff;font-weight:700;cursor:pointer}
  .forgot-submit-btn:hover{transform:translateY(-1px);box-shadow:0 12px 30px rgba(37,99,235,.3);}
  .forgot-navigation{display:flex;align-items:center;justify-content:center;gap:.75rem;font-size:.875rem}
  .forgot-nav-link{color:#60A5FA;text-decoration:none}
  .forgot-nav-link:hover{color:#93C5FD;text-decoration:underline}
  .forgot-nav-separator{color:#475569;opacity:.6}
</style>
