<!-- views/contact-sent.ejs -->
<section class="page mini">
  <h1 class="page-title">✅ Message Sent</h1>

  <div class="card success">
    <p>Thanks — we’ve received your message. We’ll get back to you shortly.</p>

    <% if (next) { %>
      <p class="muted">You’ll be redirected to your dashboard in
        <span id="count"><%= autoRedirectSeconds %></span> seconds…</p>
      <div class="actions">
        <a href="<%= next %>" class="btn primary">Go to my dashboard</a>
        <a href="/sales" class="btn">Back to Shop</a>
        <a href="/contact" class="btn link">Stay on Contact</a>
      </div>
    <% } else { %>
      <div class="actions">
        <a href="/sales" class="btn primary">Back to Shop</a>
        <a href="/contact" class="btn">Send another message</a>
      </div>
    <% } %>
  </div>
</section>

<style nonce="<%= nonce %>">
.page-title{ text-align:center; margin:1rem 0 1.25rem; font-weight:700 }
.card.success{ max-width:560px; margin:0 auto; padding:1.25rem 1.25rem 1rem;
  background:#ecfdf5; border:1px solid #a7f3d0; border-radius:12px; }
.dark-theme .card.success{ background:#064e3b; border-color:#10b981; color:#ecfdf5; }
.muted{ color:#4b5563; margin:.5rem 0 1rem } .dark-theme .muted{ color:#cbd5e1 }
.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }
.btn{ padding:.6rem 1rem; border-radius:8px; border:1px solid #e5e7eb; text-decoration:none; }
.btn.primary{ background:#2563eb; border-color:#1d4ed8; color:#fff }
.btn.link{ background:transparent; border-color:transparent; text-decoration:underline }
</style>

<script nonce="<%= nonce %>">
(function(){
  var next = "<%- next %>";
  var secs = Number("<%- autoRedirectSeconds %>") || 0;
  if (!next || secs <= 0) return;

  var el = document.getElementById('count');
  var t = secs;
  var timer = setInterval(function(){
    t--; if (el) el.textContent = t;
    if (t <= 0) { clearInterval(timer); window.location.assign(next); }
  }, 9900);
})();
</script>
