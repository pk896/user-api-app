<!--view/businessverify-pending.ejs-->
<div class="verification-pending-page">
  <!-- Background Decoration -->
  <div class="background-decoration">
    <div class="decoration-circle circle-1"></div>
    <div class="decoration-circle circle-2"></div>
    <div class="decoration-circle circle-3"></div>
  </div>

  <!-- Main Content -->
  <div class="verification-container">
    <!-- Left Side - Information & Features -->
    <div class="verification-info">
      <div class="info-content">
        <div class="brand-header">
          <div class="brand-logo">
            <svg viewBox="0 0 24 24" width="32" height="32">
              <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
            </svg>
          </div>
          <h1 class="brand-name">Unicoporate</h1>
        </div>
        
        <div class="info-welcome">
          <h2>Almost There!</h2>
          <p>Complete your email verification to unlock your business dashboard.</p>
        </div>

        <div class="verification-steps">
          <div class="step active">
            <div class="step-number">1</div>
            <div class="step-content">
              <h4>Account Created</h4>
              <p>Your business account is ready</p>
            </div>
          </div>
          
          <div class="step active">
            <div class="step-number">2</div>
            <div class="step-content">
              <h4>Verification Sent</h4>
              <p>Check your email inbox</p>
            </div>
          </div>
          
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h4>Access Dashboard</h4>
              <p>Start managing your business</p>
            </div>
          </div>
        </div>

        <div class="account-details">
          <h3>Account Details</h3>
          <div class="detail-item">
            <div class="detail-label">Business Name</div>
            <div class="detail-value"><%= business.name %></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Account Type</div>
            <div class="detail-value badge badge-<%= business.role %>">
              <%= business.role.charAt(0).toUpperCase() + business.role.slice(1) %>
            </div>
          </div>
        </div>

        <div class="verification-benefits">
          <h3>Benefits of Verification</h3>
          <div class="benefits-grid">
            <div class="benefit">
              <div class="benefit-icon">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
              </div>
              <div class="benefit-content">
                <h4>Full Dashboard Access</h4>
                <p>Manage products, orders, and analytics</p>
              </div>
            </div>
            
            <div class="benefit">
              <div class="benefit-icon">
                <svg viewBox="0 0 24 24" width="20" height="20">
                  <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                </svg>
              </div>
              <div class="benefit-content">
                <h4>Enhanced Security</h4>
                <p>Protect your business account</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Verification Content -->
    <div class="verification-content <%= themeCss && themeCss.includes('dark') ? 'dark-theme' : 'light-theme' %>">
      <div class="content-header">
        <div class="header-icon">
          <svg viewBox="0 0 24 24" width="48" height="48">
            <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
          </svg>
        </div>
        <h2>Verify Your Email</h2>
        <p class="subtitle">One last step to access your business dashboard</p>
      </div>

      <!-- Welcome Message -->
      <div class="welcome-card">
        <div class="welcome-header">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <div>
            <h3>Welcome, <strong><%= business.name %></strong>!</h3>
            <p>Your <span class="role-highlight"><%= business.role.toUpperCase() %></span> account is awaiting verification</p>
          </div>
        </div>
        <div class="welcome-message">
          <p>We've created your business account successfully. To ensure the security of your account and provide you with full access to our platform, please verify your email address.</p>
        </div>
      </div>

      <!-- Email Verification Details -->
      <div class="verification-details">
        <div class="details-header">
          <h3>Verification Email Sent</h3>
          <div class="status-badge pending">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
            </svg>
            <span>Pending Verification</span>
          </div>
        </div>

        <div class="email-display">
          <div class="email-label">Email Address</div>
          <div class="email-address">
            <svg class="email-icon" viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
            <span><%= business.email %></span>
          </div>
        </div>

        <div class="verification-instructions">
          <h4>What to do next:</h4>
          <ol class="instructions-list">
            <li>
              <div class="instruction-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <strong>Check your inbox</strong>
                  <p>Look for an email from <strong>verify@unicoporate.com</strong> with the subject "Verify your business email"</p>
                </div>
              </div>
            </li>
            <li>
              <div class="instruction-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <strong>Click the verification link</strong>
                  <p>Open the email and click the "Verify Email" button or link</p>
                </div>
              </div>
            </li>
            <li>
              <div class="instruction-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <strong>Access your dashboard</strong>
                  <p>You'll be automatically redirected to your business dashboard</p>
                </div>
              </div>
            </li>
          </ol>
        </div>

        <div class="search-tips">
          <div class="tip">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span>Search for "Unicoporate" or "Verify your business email" in your inbox</span>
          </div>
          <div class="tip">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span>Check spam, junk, or promotions folders if you don't see it</span>
          </div>
          <div class="tip">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span>Verification link expires in 24 hours for security</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <form action="/business/verify/resend" method="post" class="action-buttons" id="resendForm">
        <button type="submit" class="btn btn-primary" id="resendBtn">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
          Resend Verification Email
        </button>
        
        <div class="secondary-actions">
          <a href="https://mail.google.com" target="_blank" class="btn btn-secondary">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
            </svg>
            Open Email App
          </a>
          
          <a href="/business/logout" class="btn btn-outline">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
            </svg>
            Logout
          </a>
        </div>
      </form>

      <!-- Support Section -->
      <div class="support-section">
        <div class="support-header">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
          </svg>
          <h4>Need Help?</h4>
        </div>
        <p>If you're having trouble finding the verification email or need assistance, our support team is here to help.</p>
        <div class="support-links">
          <a href="/business/support" class="support-link">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M4.01 6.03l7.51 3.22-7.52-1 .01-2.22m7.5 8.72L4 17.97v-2.22l7.51-1M2.01 3L2 10l15 2-15 2 .01 7L23 12 2.01 3z"/>
            </svg>
            Contact Support
          </a>
          <a href="/business/faq" class="support-link">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
            </svg>
            Visit FAQ
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Page Container */
  .verification-pending-page {
    min-height: 100vh;
    background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%);
    position: relative;
    overflow: hidden;
  }

  .dark-theme .verification-pending-page {
    background: linear-gradient(135deg, #0F172A 0%, #020617 100%);
  }

  /* Background Decoration */
  .background-decoration {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .decoration-circle {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.4;
  }

  .circle-1 {
    width: 300px;
    height: 300px;
    background: #2563EB;
    top: -100px;
    right: -100px;
  }

  .circle-2 {
    width: 200px;
    height: 200px;
    background: #7C3AED;
    bottom: -50px;
    left: -50px;
  }

  .circle-3 {
    width: 150px;
    height: 150px;
    background: #22C55E;
    top: 50%;
    left: 10%;
  }

  /* Main Container */
  .verification-container {
    position: relative;
    z-index: 2;
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: 100vh;
    max-width: 1400px;
    margin: 0 auto;
  }

  @media (max-width: 1024px) {
    .verification-container {
      grid-template-columns: 1fr;
    }
  }

  /* Info Section */
  .verification-info {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.95) 0%, rgba(124, 58, 237, 0.95) 100%);
    color: white;
    padding: 3rem 2rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .info-content {
    max-width: 500px;
    margin: 0 auto;
  }

  .brand-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 3rem;
  }

  .brand-logo {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
  }

  .brand-name {
    margin: 0;
    font-size: 2rem;
    font-weight: 700;
  }

  .info-welcome {
    margin-bottom: 3rem;
  }

  .info-welcome h2 {
    margin: 0 0 1rem;
    font-size: 2rem;
    font-weight: 700;
  }

  .info-welcome p {
    margin: 0;
    font-size: 1.1rem;
    opacity: 0.9;
    line-height: 1.6;
  }

  /* Verification Steps */
  .verification-steps {
    margin-bottom: 3rem;
  }

  .step {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
    opacity: 0.5;
  }

  .step.active {
    opacity: 1;
  }

  .step-number {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.2rem;
    flex-shrink: 0;
  }

  .step.active .step-number {
    background: #22C55E;
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
  }

  .step-content h4 {
    margin: 0 0 0.25rem;
    font-size: 1.1rem;
    font-weight: 600;
  }

  .step-content p {
    margin: 0;
    font-size: 0.9rem;
    opacity: 0.8;
  }

  /* Account Details */
  .account-details {
    margin-bottom: 3rem;
  }

  .account-details h3 {
    margin: 0 0 1.5rem;
    font-size: 1.3rem;
    font-weight: 600;
  }

  .detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    margin-bottom: 0.75rem;
  }

  .detail-label {
    font-size: 0.875rem;
    opacity: 0.8;
  }

  .detail-value {
    font-weight: 600;
  }

  .badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
  }

  .badge-seller {
    background: rgba(34, 197, 94, 0.2);
    color: #86EFAC;
  }

  .badge-supplier {
    background: rgba(124, 58, 237, 0.2);
    color: #C4B5FD;
  }

  .badge-buyer {
    background: rgba(37, 99, 235, 0.2);
    color: #93C5FD;
  }

  /* Verification Benefits */
  .verification-benefits {
    margin-bottom: 3rem;
  }

  .verification-benefits h3 {
    margin: 0 0 1.5rem;
    font-size: 1.3rem;
    font-weight: 600;
  }

  .benefits-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .benefit {
    display: flex;
    gap: 0.75rem;
    align-items: flex-start;
  }

  .benefit-icon {
    width: 36px;
    height: 36px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .benefit-content h4 {
    margin: 0 0 0.25rem;
    font-size: 0.95rem;
    font-weight: 600;
  }

  .benefit-content p {
    margin: 0;
    font-size: 0.85rem;
    opacity: 0.8;
  }

  /* Content Section */
  .verification-content {
    background: white;
    padding: 3rem 2rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow-y: auto;
  }

  .dark-theme .verification-content {
    background: rgba(15, 23, 42, 0.8);
    backdrop-filter: blur(10px);
  }

  /* Content Header */
  .content-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .header-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem;
  }

  .dark-theme .header-icon {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.2) 0%, rgba(37, 99, 235, 0.1) 100%);
  }

  .header-icon svg {
    color: #2563EB;
  }

  .content-header h2 {
    margin: 0 0 0.5rem;
    font-size: 2rem;
    color: #0F172A;
  }

  .dark-theme .content-header h2 {
    color: #F1F5F9;
  }

  .subtitle {
    margin: 0;
    color: #64748B;
    font-size: 1rem;
  }

  /* Welcome Card */
  .welcome-card {
    background: #F8FAFC;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    border: 1px solid #E2E8F0;
  }

  .dark-theme .welcome-card {
    background: rgba(15, 23, 42, 0.5);
    border-color: #334155;
  }

  .welcome-header {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .welcome-header svg {
    color: #2563EB;
    flex-shrink: 0;
  }

  .welcome-header h3 {
    margin: 0 0 0.25rem;
    font-size: 1.2rem;
    color: #0F172A;
  }

  .dark-theme .welcome-header h3 {
    color: #F1F5F9;
  }

  .role-highlight {
    background: linear-gradient(135deg, #22C55E 0%, #16A34A 100%);
    color: white;
    padding: 0.125rem 0.5rem;
    border-radius: 4px;
    font-weight: 700;
  }

  .welcome-message p {
    margin: 0;
    color: #64748B;
    font-size: 0.95rem;
    line-height: 1.6;
  }

  .dark-theme .welcome-message p {
    color: #94A3B8;
  }

  /* Verification Details */
  .verification-details {
    background: #F8FAFC;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    border: 1px solid #E2E8F0;
  }

  .dark-theme .verification-details {
    background: rgba(15, 23, 42, 0.5);
    border-color: #334155;
  }

  .details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .details-header h3 {
    margin: 0;
    font-size: 1.2rem;
    color: #0F172A;
  }

  .dark-theme .details-header h3 {
    color: #F1F5F9;
  }

  .status-badge {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .status-badge.pending {
    background: #FEF3C7;
    color: #92400E;
  }

  .dark-theme .status-badge.pending {
    background: rgba(245, 158, 11, 0.2);
    color: #FCD34D;
  }

  /* Email Display */
  .email-display {
    background: white;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1.5rem;
    border: 1px solid #E2E8F0;
  }

  .dark-theme .email-display {
    background: rgba(15, 23, 42, 0.5);
    border-color: #334155;
  }

  .email-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #64748B;
    margin-bottom: 0.5rem;
  }

  .email-address {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .email-icon {
    color: #64748B;
  }

  .email-address span {
    font-weight: 600;
    color: #0F172A;
    font-size: 1rem;
  }

  .dark-theme .email-address span {
    color: #F1F5F9;
  }

  /* Verification Instructions */
  .verification-instructions {
    margin-bottom: 1.5rem;
  }

  .verification-instructions h4 {
    margin: 0 0 1rem;
    font-size: 1.1rem;
    color: #0F172A;
  }

  .dark-theme .verification-instructions h4 {
    color: #F1F5F9;
  }

  .instructions-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .instructions-list li {
    margin-bottom: 1rem;
  }

  .instruction-step {
    display: flex;
    gap: 1rem;
  }

  .step-number {
    width: 32px;
    height: 32px;
    background: #2563EB;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.9rem;
    flex-shrink: 0;
  }

  .step-content strong {
    display: block;
    margin-bottom: 0.25rem;
    color: #0F172A;
    font-size: 0.95rem;
  }

  .dark-theme .step-content strong {
    color: #F1F5F9;
  }

  .step-content p {
    margin: 0;
    font-size: 0.875rem;
    color: #64748B;
    line-height: 1.5;
  }

  .step-content strong {
    color: #2563EB;
  }

  /* Search Tips */
  .search-tips {
    background: #F1F5F9;
    border-radius: 8px;
    padding: 1rem;
  }

  .dark-theme .search-tips {
    background: rgba(15, 23, 42, 0.5);
  }

  .tip {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .tip:last-child {
    margin-bottom: 0;
  }

  .tip svg {
    color: #22C55E;
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  .tip span {
    font-size: 0.875rem;
    color: #475569;
    line-height: 1.4;
  }

  .dark-theme .tip span {
    color: #94A3B8;
  }

  /* Action Buttons */
  .action-buttons {
    margin-bottom: 2rem;
  }

  .btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    width: 100%;
    margin-bottom: 1rem;
  }

  .btn-primary {
    background: linear-gradient(135deg, #22C55E 0%, #16A34A 100%);
    color: white;
    box-shadow: 0 2px 10px rgba(34, 197, 94, 0.2);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
  }

  .secondary-actions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .btn-secondary {
    background: rgba(37, 99, 235, 0.1);
    color: #2563EB;
    border: 1px solid rgba(37, 99, 235, 0.2);
  }

  .btn-secondary:hover {
    background: rgba(37, 99, 235, 0.2);
  }

  .btn-outline {
    background: transparent;
    color: #64748B;
    border: 1px solid #E2E8F0;
  }

  .dark-theme .btn-outline {
    border-color: #334155;
    color: #94A3B8;
  }

  .btn-outline:hover {
    background: #F8FAFC;
  }

  .dark-theme .btn-outline:hover {
    background: rgba(15, 23, 42, 0.5);
  }

  /* Support Section */
  .support-section {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(124, 58, 237, 0.05) 100%);
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid rgba(37, 99, 235, 0.1);
  }

  .dark-theme .support-section {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(124, 58, 237, 0.1) 100%);
    border-color: rgba(37, 99, 235, 0.2);
  }

  .support-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }

  .support-header svg {
    color: #2563EB;
  }

  .support-header h4 {
    margin: 0;
    font-size: 1.1rem;
    color: #0F172A;
  }

  .dark-theme .support-header h4 {
    color: #F1F5F9;
  }

  .support-section p {
    margin: 0 0 1rem;
    font-size: 0.875rem;
    color: #64748B;
    line-height: 1.5;
  }

  .support-links {
    display: flex;
    gap: 1rem;
  }

  .support-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #2563EB;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.875rem;
  }

  .support-link:hover {
    text-decoration: underline;
  }

  .support-link svg {
    transition: transform 0.3s ease;
  }

  .support-link:hover svg {
    transform: translateX(4px);
  }

  /* Animations */
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .verification-content {
    animation: slideIn 0.6s ease;
  }
</style>

<script nonce="<%= nonce %>">
  document.addEventListener("DOMContentLoaded", () => {
    console.log("âœ… Verification pending page loaded with CSP nonce");

    const resendForm = document.getElementById('resendForm');
    const resendBtn = document.getElementById('resendBtn');

    if (resendForm && resendBtn) {
      let canResend = true;
      let cooldownTimer = null;

      resendForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (!canResend) {
          showError('Please wait before resending another email');
          return;
        }
        
        // Show loading state
        const originalText = resendBtn.innerHTML;
        resendBtn.innerHTML = `
          <svg class="animate-spin" viewBox="0 0 24 24" width="20" height="20" style="animation: spin 1s linear infinite;">
            <path fill="currentColor" d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
          </svg>
          Sending...
        `;
        resendBtn.disabled = true;
        
        // Simulate API call
        setTimeout(() => {
          // Restore button with cooldown
          resendBtn.disabled = false;
          startCooldown(60); // 60 seconds cooldown
          
          // Show success message
          showSuccess('Verification email sent successfully! Check your inbox.');
          
          // Update the button text
          updateResendButton(60);
        }, 1500);
      });
      
      function startCooldown(seconds) {
        canResend = false;
        let remaining = seconds;
        
        cooldownTimer = setInterval(() => {
          remaining--;
          updateResendButton(remaining);
          
          if (remaining <= 0) {
            clearInterval(cooldownTimer);
            canResend = true;
            resendBtn.innerHTML = originalText;
          }
        }, 1000);
      }
      
      function updateResendButton(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = seconds % 60;
        
        resendBtn.innerHTML = `
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
          </svg>
          Resend available in ${minutes}:${secs.toString().padStart(2, '0')}
        `;
      }
      
      // Store original button text
      const originalText = resendBtn.innerHTML;
    }
    
    // Check if user is on mobile to update email app button
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    const emailAppBtn = document.querySelector('.btn-secondary[href*="mail.google.com"]');
    
    if (emailAppBtn && isMobile) {
      emailAppBtn.innerHTML = `
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
        </svg>
        Open Mail App
      `;
      emailAppBtn.href = 'mailto:';
    }
    
    // Auto-check for email client
    function detectEmailClient() {
      const userAgent = navigator.userAgent.toLowerCase();
      let emailClient = 'gmail';
      
      if (userAgent.includes('outlook') || userAgent.includes('office')) {
        emailClient = 'outlook';
      } else if (userAgent.includes('yahoo')) {
        emailClient = 'yahoo';
      } else if (userAgent.includes('apple mail')) {
        emailClient = 'apple';
      }
      
      return emailClient;
    }
    
    // Update email app button based on detection
    if (emailAppBtn && !isMobile) {
      const emailClient = detectEmailClient();
      let emailUrl = 'https://mail.google.com';
      let buttonText = 'Open Gmail';
      
      switch(emailClient) {
        case 'outlook':
          emailUrl = 'https://outlook.live.com';
          buttonText = 'Open Outlook';
          break;
        case 'yahoo':
          emailUrl = 'https://mail.yahoo.com';
          buttonText = 'Open Yahoo Mail';
          break;
        case 'apple':
          emailUrl = 'message://';
          buttonText = 'Open Mail';
          break;
      }
      
      emailAppBtn.href = emailUrl;
      emailAppBtn.innerHTML = `
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
        </svg>
        ${buttonText}
      `;
    }
    
    // Show success message
    function showSuccess(message) {
      const successDiv = document.createElement('div');
      successDiv.className = 'flash flash-success';
      successDiv.innerHTML = `
        <svg class="flash-icon" viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        <div class="flash-content">
          <strong>Success!</strong>
          <p>${message}</p>
        </div>
      `;
      
      // Create flash container if it doesn't exist
      let flashContainer = document.querySelector('.flash-container');
      if (!flashContainer) {
        flashContainer = document.createElement('div');
        flashContainer.className = 'flash-container';
        document.querySelector('.verification-content').insertBefore(flashContainer, document.querySelector('.verification-content').firstChild);
      }
      
      flashContainer.appendChild(successDiv);
      
      // Remove after 5 seconds
      setTimeout(() => {
        successDiv.remove();
      }, 5000);
    }
    
    // Show error message
    function showError(message) {
      const errorDiv = document.createElement('div');
      errorDiv.className = 'flash flash-error';
      errorDiv.innerHTML = `
        <svg class="flash-icon" viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <div class="flash-content">
          <strong>Error</strong>
          <p>${message}</p>
        </div>
      `;
      
      // Create flash container if it doesn't exist
      let flashContainer = document.querySelector('.flash-container');
      if (!flashContainer) {
        flashContainer = document.createElement('div');
        flashContainer.className = 'flash-container';
        document.querySelector('.verification-content').insertBefore(flashContainer, document.querySelector('.verification-content').firstChild);
      }
      
      flashContainer.appendChild(errorDiv);
      
      // Remove after 5 seconds
      setTimeout(() => {
        errorDiv.remove();
      }, 5000);
    }
    
    // Add flash styles
    const style = document.createElement('style');
    style.textContent = `
      .flash-container {
        margin-bottom: 2rem;
      }
      
      .flash {
        display: flex;
        gap: 1rem;
        padding: 1.25rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        animation: slideIn 0.3s ease;
      }
      
      .flash-success {
        background: linear-gradient(135deg, #DCFCE7 0%, #BBF7D0 100%);
        border-left: 4px solid #22C55E;
        color: #166534;
      }
      
      .flash-error {
        background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%);
        border-left: 4px solid #EF4444;
        color: #991B1B;
      }
      
      .flash-icon {
        flex-shrink: 0;
      }
      
      .flash-content strong {
        display: block;
        margin-bottom: 0.25rem;
        font-size: 0.875rem;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      
      .animate-spin {
        animation: spin 1s linear infinite;
      }
    `;
    document.head.appendChild(style);
    
    // Add auto-refresh suggestion after 5 minutes
    setTimeout(() => {
      const refreshNotice = document.createElement('div');
      refreshNotice.className = 'flash flash-info';
      refreshNotice.innerHTML = `
        <svg class="flash-icon" viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <div class="flash-content">
          <strong>Still waiting?</strong>
          <p>Check your spam folder or try resending the verification email</p>
        </div>
      `;
      
      // Add info flash style
      const infoStyle = document.createElement('style');
      infoStyle.textContent = `
        .flash-info {
          background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
          border-left: 4px solid #2563EB;
          color: #1E40AF;
        }
        .dark-theme .flash-info {
          background: linear-gradient(135deg, rgba(37, 99, 235, 0.2) 0%, rgba(37, 99, 235, 0.1) 100%);
          color: #60A5FA;
        }
      `;
      document.head.appendChild(infoStyle);
      
      const flashContainer = document.querySelector('.flash-container');
      if (flashContainer) {
        flashContainer.appendChild(refreshNotice);
        
        // Auto-remove after 10 seconds
        setTimeout(() => {
          refreshNotice.remove();
        }, 10000);
      }
    }, 300000); // 5 minutes
  });
</script>