<!--layout.ejs-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title><%= title ? `${title} | MyApp` : 'MyApp' %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/favicon.ico" />
  
  <!-- layout.ejs -->

  <link rel="stylesheet" href="<%= themeCss || '/css/main.css' %>">

<!--<link rel="stylesheet" href="<%= themeCss %>">-->

<!-- Default CSS with fallback -->
  <!--<link rel="stylesheet" href="<%= typeof themeCss !== 'undefined' && themeCss ? themeCss : '/css/main.css' %>">-->

  <%- typeof styles !== 'undefined' ? styles : '' %>
</head>

  <body>
    <!-- Navbar -->
  <%- include('partials/navbar', { user: user, active: active }) %>

  <!-- Flash messages -->
  <div class="flash-messages">
    <% if (success.length) { %>
      <% success.forEach(msg => { %>
        <div class="alert alert-success"><%= msg %></div>
      <% }) %>
    <% } %>
    <% if (error.length) { %>
      <% error.forEach(msg => { %>
        <div class="alert alert-error"><%= msg %></div>
      <% }) %>
    <% } %>
  </div>

  <!-- Page content -->
  <main style="max-width:1100px; margin:1.25rem auto; padding:0 1rem;">
    <%- body %>
  </main>

  <%- include('partials/footer') %>

  <script src="/js/main.js" defer></script>
  <%- typeof scripts !== 'undefined' ? scripts : '' %>
  </body>
</html>